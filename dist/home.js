"use strict";$(".tabs").on("click","li",function(n){var e=$(n.currentTarget),t=e.index();e.addClass("active").siblings().removeClass("active"),$(".tab-content").children().eq(t).addClass("active").siblings().removeClass("active"),close()});var $olSongs=$("ol#songs"),query=new AV.Query("Song");query.find().then(function(n){$("#songs-loading").remove();for(var e=0;e<n.length;e++){var t=n[e].attributes;if(!0===t.hot){var i='\n            <li>\n                <a href="./song.html?id='+t.id+'">\n                    <h3>'+t.name+'</h3>\n                    <p><i class="sq"></i>'+t.singer+"</p>\n                    <div></div>\n                </a>\n            </li>\n                    ";$olSongs.append(i)}}},function(n){alert("获取歌曲曲失败")});var $olSong=$("ol#song");(query=new AV.Query("Song")).find().then(function(n){for(var e=0;e<n.length;e++){var t=n[e].attributes;if(e-9<10){if(!1===t.hot){i='\n                <li>\n                    <a href="./song.html?id='+t.id+'">\n                        <div class="number">0'+(e-9)+"</div>\n                        <h3>"+t.name+"</h3>\n                        <p><i></i>"+t.singer+'</p>\n                        <div class="button"></div>\n                    </a>\n                </li>\n                        ';$olSong.append(i)}}else if(!1===t.hot){var i='\n                <li>\n                    <a href="./song.html?id='+t.id+'">\n                        <div class="number">'+(e-9)+"</div>\n                        <h3>"+t.name+"</h3>\n                        <p><i></i>"+t.singer+'</p>\n                        <div class="button"></div>\n                    </a>\n                </li>\n                        ';$olSong.append(i)}}},function(n){alert("获取歌曲曲失败")});var timer=null;$("input#search").on("input",function(n){timer&&window.clearTimeout(timer),timer=setTimeout(function(){timer=null;var e=$(n.currentTarget).val(),t=new AV.Query("Song");$(".hot-seek").hide(),$(".close").addClass("active"),$(".search-content").html("<h3>搜索“"+e+"”</h3>").show(),t.contains("name",e),t.find().then(function(n){if($("#searchResult").empty(),0===n.length)$("#searchResult").html("<div>暂无搜索结果</div>"),$(".search-content").hide();else{for(var t=0;t<n.length;t++){var i=n[t].attributes,a='\n                <li>\n                        <i class="iconfont icon-weibiaoti-"></i>\n                        <a href="./song.html?id='+i.id+'">'+i.name+"</a>\n                </li>\n                ";$("#searchResult").append(a)}if(""===e)return close()}})},400)});var close=function(){$("#search").val(""),$(".close").removeClass("active"),$("#searchResult").empty(),$(".hot-seek").show(),$(".search-content").hide()};$(".close").on("click",function(){return close()}),$(".hot-seek > ul").on("click","li",function(n){var e=$(n.currentTarget);$("#search").val(e.text());var t=$("#search").val(),i=new AV.Query("Song");$(".hot-seek").hide(),$(".close").addClass("active"),$(".search-content").html("<h3>搜索“"+t+"”</h3>").show(),i.contains("name",t),i.find().then(function(n){if($("#searchResult").empty(),0===n.length)$("#searchResult").html("<div>暂无搜索结果</div>"),$(".search-content").hide();else{for(var e=0;e<n.length;e++){var i='\n            <li>\n                    <i class="iconfont icon-weibiaoti-"></i>\n                    <a href="#">'+n[e].attributes.name+"</a>\n            </li>\n            ";$("#searchResult").append(i)}if(""===t)return close()}})}),$("#searchResult").on("click","li > a",function(n){$a=$(n.currentTarget);var e=$a.text(),t=new AV.Query("Song");$(".search-content").hide(),t.contains("name",e),t.find().then(function(n){$("#searchResult").empty();for(var e=0;e<n.length;e++){var t=n[e].attributes,i='\n            <ol class="list" id="songs">\n            <li>\n            <a href="./song.html?id='+t.id+'">\n                <h3>'+t.name+"</h3>\n                <p><i></i>"+t.singer+"</p>\n                <div></div>\n            </a>\n            </li>\n            </ol>\n    ";$("#searchResult").append(i)}})}),$(".hotlist > ul").on("click","li>div>span",function(){$("#search").val($(this).text()),hot()});var hot=function(){$(".hotlist").hide(),$(".hot-seek").hide(),$(".close").addClass("active"),$("#searchResults").empty();var n=$("#search").val();$(".search-content").html("<h3>搜索“"+n+"”</h3>").show()};